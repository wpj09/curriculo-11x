/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */(function(t){typeof define=="function"&&define.amd?define(["jquery"],t):t(typeof jQuery<"u"?jQuery:window.Zepto)})(function(t){function G(e){var o=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(o))}function J(e){var o=e.target,s=t(o);if(!s.is("[type=submit],[type=image]")){var c=s.closest("[type=submit]");if(c.length===0)return;o=c[0]}var i=this;if(i.clk=o,o.type=="image")if(e.offsetX!==void 0)i.clk_x=e.offsetX,i.clk_y=e.offsetY;else if(typeof t.fn.offset=="function"){var m=s.offset();i.clk_x=e.pageX-m.left,i.clk_y=e.pageY-m.top}else i.clk_x=e.pageX-o.offsetLeft,i.clk_y=e.pageY-o.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function y(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var V={};V.fileapi=t("<input type='file'/>").get(0).files!==void 0,V.formdata=window.FormData!==void 0;var ae=!!t.fn.prop;t.fn.attr2=function(){if(!ae)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||typeof e=="string"?e:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function o(S){var v,p,g=t.param(S,e.traditional).split("&"),D=g.length,F=[];for(v=0;D>v;v++)g[v]=g[v].replace(/\+/g," "),p=g[v].split("="),F.push([decodeURIComponent(p[0]),decodeURIComponent(p[1])]);return F}function s(S){for(var v=new FormData,p=0;p<S.length;p++)v.append(S[p].name,S[p].value);if(e.extraData){var g=o(e.extraData);for(p=0;p<g.length;p++)g[p]&&v.append(g[p][0],g[p][1])}e.data=null;var D=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});e.uploadProgress&&(D.xhr=function(){var a=t.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",function(j){var I=0,M=j.loaded||j.position,L=j.total;j.lengthComputable&&(I=Math.ceil(M/L*100)),e.uploadProgress(j,M,L,I)},!1),a}),D.data=null;var F=D.beforeSend;return D.beforeSend=function(a,j){j.data=e.formData?e.formData:v,F&&F.call(this,a,j)},t.ajax(D)}function c(S){function v(l){var n=null;try{l.contentWindow&&(n=l.contentWindow.document)}catch(d){y("cannot get iframe.contentWindow document: "+d)}if(n)return n;try{n=l.contentDocument?l.contentDocument:l.document}catch(d){y("cannot get iframe.contentDocument: "+d),n=l.document}return n}function p(){function l(){try{var q=v(L).readyState;y("state = "+q),q&&q.toLowerCase()=="uninitialized"&&setTimeout(l,50)}catch(R){y("Server abort: ",R," (",R.name,")"),g(te),Y&&clearTimeout(Y),Y=void 0}}var n=f.attr2("target"),d=f.attr2("action"),N="multipart/form-data",_=f.attr("enctype")||f.attr("encoding")||N;E.setAttribute("target",I),(!i||/post/i.test(i))&&E.setAttribute("method","POST"),d!=a.url&&E.setAttribute("action",a.url),a.skipEncodingOverride||i&&!/post/i.test(i)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),a.timeout&&(Y=setTimeout(function(){ee=!0,g(ie)},a.timeout));var k=[];try{if(a.extraData)for(var O in a.extraData)a.extraData.hasOwnProperty(O)&&k.push(t.isPlainObject(a.extraData[O])&&a.extraData[O].hasOwnProperty("name")&&a.extraData[O].hasOwnProperty("value")?t('<input type="hidden" name="'+a.extraData[O].name+'">').val(a.extraData[O].value).appendTo(E)[0]:t('<input type="hidden" name="'+O+'">').val(a.extraData[O]).appendTo(E)[0]);a.iframeTarget||M.appendTo("body"),L.attachEvent?L.attachEvent("onload",g):L.addEventListener("load",g,!1),setTimeout(l,15);try{E.submit()}catch{var W=document.createElement("form").submit;W.apply(E)}}finally{E.setAttribute("action",d),E.setAttribute("enctype",_),n?E.setAttribute("target",n):f.removeAttr("target"),t(k).remove()}}function g(l){if(!r.aborted&&!le){if(w=v(L),w||(y("cannot access response document"),l=te),l===ie&&r)return r.abort("timeout"),void C.reject(r,"timeout");if(l==te&&r)return r.abort("server abort"),void C.reject(r,"error","server abort");if(w&&w.location.href!=a.iframeSrc||ee){L.detachEvent?L.detachEvent("onload",g):L.removeEventListener("load",g,!1);var n,d="success";try{if(ee)throw"timeout";var N=a.dataType=="xml"||w.XMLDocument||t.isXMLDoc(w);if(y("isXml="+N),!N&&window.opera&&(w.body===null||!w.body.innerHTML)&&--de)return y("requeing onLoad callback, DOM not available"),void setTimeout(g,250);var _=w.body?w.body:w.documentElement;r.responseText=_?_.innerHTML:null,r.responseXML=w.XMLDocument?w.XMLDocument:w,N&&(a.dataType="xml"),r.getResponseHeader=function(U){var xe={"content-type":a.dataType};return xe[U.toLowerCase()]},_&&(r.status=Number(_.getAttribute("status"))||r.status,r.statusText=_.getAttribute("statusText")||r.statusText);var k=(a.dataType||"").toLowerCase(),O=/(json|script|text)/.test(k);if(O||a.textarea){var W=w.getElementsByTagName("textarea")[0];if(W)r.responseText=W.value,r.status=Number(W.getAttribute("status"))||r.status,r.statusText=W.getAttribute("statusText")||r.statusText;else if(O){var q=w.getElementsByTagName("pre")[0],R=w.getElementsByTagName("body")[0];q?r.responseText=q.textContent?q.textContent:q.innerText:R&&(r.responseText=R.textContent?R.textContent:R.innerText)}}else k=="xml"&&!r.responseXML&&r.responseText&&(r.responseXML=he(r.responseText));try{ce=ge(r,k,a)}catch(U){d="parsererror",r.error=n=U||d}}catch(U){y("error caught: ",U),d="error",r.error=n=U||d}r.aborted&&(y("upload aborted"),d=null),r.status&&(d=r.status>=200&&r.status<300||r.status===304?"success":"error"),d==="success"?(a.success&&a.success.call(a.context,ce,"success",r),C.resolve(r.responseText,"success",r),j&&t.event.trigger("ajaxSuccess",[r,a])):d&&(n===void 0&&(n=r.statusText),a.error&&a.error.call(a.context,r,d,n),C.reject(r,"error",n),j&&t.event.trigger("ajaxError",[r,a,n])),j&&t.event.trigger("ajaxComplete",[r,a]),j&&!--t.active&&t.event.trigger("ajaxStop"),a.complete&&a.complete.call(a.context,r,d),le=!0,a.timeout&&clearTimeout(Y),setTimeout(function(){a.iframeTarget?M.attr("src",a.iframeSrc):M.remove(),r.responseXML=null},100)}}}var D,F,a,j,I,M,L,r,H,z,ee,Y,E=f[0],C=t.Deferred();if(C.abort=function(l){r.abort(l)},S)for(F=0;F<u.length;F++)D=t(u[F]),ae?D.prop("disabled",!1):D.removeAttr("disabled");if(a=t.extend(!0,{},t.ajaxSettings,e),a.context=a.context||a,I="jqFormIO"+new Date().getTime(),a.iframeTarget?(M=t(a.iframeTarget),z=M.attr2("name"),z?I=z:M.attr2("name",I)):(M=t('<iframe name="'+I+'" src="'+a.iframeSrc+'" />'),M.css({position:"absolute",top:"-1000px",left:"-1000px"})),L=M[0],r={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(l){var n=l==="timeout"?"timeout":"aborted";y("aborting upload... "+n),this.aborted=1;try{L.contentWindow.document.execCommand&&L.contentWindow.document.execCommand("Stop")}catch{}M.attr("src",a.iframeSrc),r.error=n,a.error&&a.error.call(a.context,r,n,l),j&&t.event.trigger("ajaxError",[r,a,n]),a.complete&&a.complete.call(a.context,r,n)}},j=a.global,j&&t.active++===0&&t.event.trigger("ajaxStart"),j&&t.event.trigger("ajaxSend",[r,a]),a.beforeSend&&a.beforeSend.call(a.context,r,a)===!1)return a.global&&t.active--,C.reject(),C;if(r.aborted)return C.reject(),C;H=E.clk,H&&(z=H.name,z&&!H.disabled&&(a.extraData=a.extraData||{},a.extraData[z]=H.value,H.type=="image"&&(a.extraData[z+".x"]=E.clk_x,a.extraData[z+".y"]=E.clk_y)));var ie=1,te=2,se=t("meta[name=csrf-token]").attr("content"),ue=t("meta[name=csrf-param]").attr("content");ue&&se&&(a.extraData=a.extraData||{},a.extraData[ue]=se),a.forceSync?p():setTimeout(p,10);var ce,w,le,de=50,he=t.parseXML||function(l,n){return window.ActiveXObject?(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(l)):n=new DOMParser().parseFromString(l,"text/xml"),n&&n.documentElement&&n.documentElement.nodeName!="parsererror"?n:null},ve=t.parseJSON||function(l){return window.eval("("+l+")")},ge=function(l,n,d){var N=l.getResponseHeader("content-type")||"",_=n==="xml"||!n&&N.indexOf("xml")>=0,k=_?l.responseXML:l.responseText;return _&&k.documentElement.nodeName==="parsererror"&&t.error&&t.error("parsererror"),d&&d.dataFilter&&(k=d.dataFilter(k,n)),typeof k=="string"&&(n==="json"||!n&&N.indexOf("json")>=0?k=ve(k):(n==="script"||!n&&N.indexOf("javascript")>=0)&&t.globalEval(k)),k};return C}if(!this.length)return y("ajaxSubmit: skipping submit process - no element selected"),this;var i,m,x,f=this;typeof e=="function"?e={success:e}:e===void 0&&(e={}),i=e.type||this.attr2("method"),m=e.url||this.attr2("action"),x=typeof m=="string"?t.trim(m):"",x=x||window.location.href||"",x&&(x=(x.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:x,success:t.ajaxSettings.success,type:i||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var b={};if(this.trigger("form-pre-serialize",[this,e,b]),b.veto)return y("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return y("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var h=e.traditional;h===void 0&&(h=t.ajaxSettings.traditional);var T,u=[],A=this.formToArray(e.semantic,u);if(e.data&&(e.extraData=e.data,T=t.param(e.data,h)),e.beforeSubmit&&e.beforeSubmit(A,this,e)===!1)return y("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[A,this,e,b]),b.veto)return y("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var P=t.param(A,h);T&&(P=P?P+"&"+T:T),e.type.toUpperCase()=="GET"?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+P,e.data=null):e.data=P;var X=[];if(e.resetForm&&X.push(function(){f.resetForm()}),e.clearForm&&X.push(function(){f.clearForm(e.includeHidden)}),!e.dataType&&e.target){var K=e.success||function(){};X.push(function(S){var v=e.replaceTarget?"replaceWith":"html";t(e.target)[v](S).each(K,arguments)})}else e.success&&X.push(e.success);if(e.success=function(S,v,p){for(var g=e.context||this,D=0,F=X.length;F>D;D++)X[D].apply(g,[S,v,p||f,f])},e.error){var B=e.error;e.error=function(S,v,p){var g=e.context||this;B.apply(g,[S,v,p,f])}}if(e.complete){var fe=e.complete;e.complete=function(S,v){var p=e.context||this;fe.apply(p,[S,v,f])}}var me=t("input[type=file]:enabled",this).filter(function(){return t(this).val()!==""}),re=me.length>0,ne="multipart/form-data",oe=f.attr("enctype")==ne||f.attr("encoding")==ne,Z=V.fileapi&&V.formdata;y("fileAPI :"+Z);var Q,pe=(re||oe)&&!Z;e.iframe!==!1&&(e.iframe||pe)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){Q=c(A)}):Q=c(A):Q=(re||oe)&&Z?s(A):t.ajax(e),f.removeData("jqxhr").data("jqxhr",Q);for(var $=0;$<u.length;$++)u[$]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&t.isFunction(t.fn.on),!e.delegation&&this.length===0){var o={s:this.selector,c:this.context};return!t.isReady&&o.s?(y("DOM not ready, queuing ajaxForm"),t(function(){t(o.s,o.c).ajaxForm(e)}),this):(y("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return e.delegation?(t(document).off("submit.form-plugin",this.selector,G).off("click.form-plugin",this.selector,J).on("submit.form-plugin",this.selector,e,G).on("click.form-plugin",this.selector,e,J),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,G).bind("click.form-plugin",e,J)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,o){var s=[];if(this.length===0)return s;var c,i=this[0],m=this.attr("id"),x=e?i.getElementsByTagName("*"):i.elements;if(x&&!/MSIE [678]/.test(navigator.userAgent)&&(x=t(x).get()),m&&(c=t(':input[form="'+m+'"]').get(),c.length&&(x=(x||[]).concat(c))),!x||!x.length)return s;var f,b,h,T,u,A,P;for(f=0,A=x.length;A>f;f++)if(u=x[f],h=u.name,h&&!u.disabled)if(e&&i.clk&&u.type=="image")i.clk==u&&(s.push({name:h,value:t(u).val(),type:u.type}),s.push({name:h+".x",value:i.clk_x},{name:h+".y",value:i.clk_y}));else if(T=t.fieldValue(u,!0),T&&T.constructor==Array)for(o&&o.push(u),b=0,P=T.length;P>b;b++)s.push({name:h,value:T[b]});else if(V.fileapi&&u.type=="file"){o&&o.push(u);var X=u.files;if(X.length)for(b=0;b<X.length;b++)s.push({name:h,value:X[b],type:u.type});else s.push({name:h,value:"",type:u.type})}else T!==null&&typeof T<"u"&&(o&&o.push(u),s.push({name:h,value:T,type:u.type,required:u.required}));if(!e&&i.clk){var K=t(i.clk),B=K[0];h=B.name,h&&!B.disabled&&B.type=="image"&&(s.push({name:h,value:K.val()}),s.push({name:h+".x",value:i.clk_x},{name:h+".y",value:i.clk_y}))}return s},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var o=[];return this.each(function(){var s=this.name;if(s){var c=t.fieldValue(this,e);if(c&&c.constructor==Array)for(var i=0,m=c.length;m>i;i++)o.push({name:s,value:c[i]});else c!==null&&typeof c<"u"&&o.push({name:this.name,value:c})}}),t.param(o)},t.fn.fieldValue=function(e){for(var o=[],s=0,c=this.length;c>s;s++){var i=this[s],m=t.fieldValue(i,e);m===null||typeof m>"u"||m.constructor==Array&&!m.length||(m.constructor==Array?t.merge(o,m):o.push(m))}return o},t.fieldValue=function(e,o){var s=e.name,c=e.type,i=e.tagName.toLowerCase();if(o===void 0&&(o=!0),o&&(!s||e.disabled||c=="reset"||c=="button"||(c=="checkbox"||c=="radio")&&!e.checked||(c=="submit"||c=="image")&&e.form&&e.form.clk!=e||i=="select"&&e.selectedIndex==-1))return null;if(i=="select"){var m=e.selectedIndex;if(0>m)return null;for(var x=[],f=e.options,b=c=="select-one",h=b?m+1:f.length,T=b?m:0;h>T;T++){var u=f[T];if(u.selected){var A=u.value;if(A||(A=u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:u.value),b)return A;x.push(A)}}return x}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var o=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var s=this.type,c=this.tagName.toLowerCase();o.test(s)||c=="textarea"?this.value="":s=="checkbox"||s=="radio"?this.checked=!1:c=="select"?this.selectedIndex=-1:s=="file"?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(s)||typeof e=="string"&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(e){return e===void 0&&(e=!0),this.each(function(){this.disabled=!e})},t.fn.selected=function(e){return e===void 0&&(e=!0),this.each(function(){var o=this.type;if(o=="checkbox"||o=="radio")this.checked=e;else if(this.tagName.toLowerCase()=="option"){var s=t(this).parent("select");e&&s[0]&&s[0].type=="select-one"&&s.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1});
